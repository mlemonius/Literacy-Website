(this["webpackJsonpliteracy-website"]=this["webpackJsonpliteracy-website"]||[]).push([[0],{105:function(e,t){},106:function(e,t,s){},133:function(e,t,s){},156:function(e,t,s){},160:function(e,t,s){},161:function(e,t,s){},162:function(e,t,s){},163:function(e,t,s){},164:function(e,t,s){},165:function(e,t,s){},166:function(e,t,s){},167:function(e,t,s){},168:function(e,t,s){},194:function(e,t){},195:function(e,t){},196:function(e,t){},197:function(e,t){},198:function(e,t){},199:function(e,t,s){},205:function(e,t,s){},207:function(e,t,s){"use strict";s.r(t);var a=s(1),i=s(0),r=s.n(i),n=s(15),o=s.n(n),c=(s(133),s(18)),l=s(236),d=s(59);s(90);class h extends i.Component{constructor(...e){super(...e),this.state={}}render(){return Object(a.jsx)("div",{className:"Info-block",children:Object(a.jsxs)(l.a,{className:"header-container",children:[Object(a.jsx)("h1",{className:"page-title",style:{color:"#434343",margin:15},children:"Storybook Academy"}),Object(a.jsx)(d.a,{style:{textAlign:"center"},color:"textSecondary",children:"Lorem ipsum dolor sit amet, consectetur adipiscing elit."})]})})}}var j=h,u=s(112),b=s.n(u),p=s(26),m=s(21),g=s(12),O=s.n(g);var x=()=>{const e=Object(c.f)(),t=async()=>{"success"===(await O.a.post("/server/user/authenticate",{},{withCredentials:!0})).data.message?e.push("/profile"):e.push("/login")};return Object(i.useEffect)((()=>{t(),setInterval((()=>t()),6e5)}),[]),Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(m.a,{children:Object(a.jsx)("title",{children:"Storybook Academy | Welcome"})}),Object(a.jsxs)("div",{className:"LandingDiv",children:[Object(a.jsx)(j,{}),Object(a.jsx)("div",{style:{margin:40,marginBottom:5,textAlign:"center"},children:Object(a.jsx)(b.a,{})}),Object(a.jsx)("div",{className:"landing-page-login",children:Object(a.jsx)(p.b,{to:"/login",children:Object(a.jsx)("button",{className:"landing-page-button",children:"Login/Signup"})})})]})]})},y=s(258),f=s(241),v=s(242),S=s(243),C=s(244),w=s(245);class k extends i.Component{constructor(...e){super(...e),this.state={open:!1},this.handleClickOpen=()=>{this.setState({open:!0})},this.handleClose=()=>{this.setState({open:!1})},this.handleEnterPress=e=>{"Enter"===e.key&&this.handleSubmit()},this.handleSubmit=()=>{this.props.valid?this.props.handleLogin():this.handleClickOpen()}}render(){return Object(a.jsx)("section",{className:"login",children:Object(a.jsxs)("div",{className:"loginContainer",style:{marginTop:"10%"},children:[this.props.submit?Object(a.jsx)("h1",{children:"Logging In..."}):Object(a.jsx)("h1",{children:"Log In"}),Object(a.jsx)("label",{children:"Email"}),Object(a.jsx)("input",{type:"text",autoFocus:!0,disabled:this.props.submit,style:this.props.submit?{backgroundColor:"#D3D3D3",color:"grey",cursor:"not-allowed"}:{},required:!0,value:this.props.email,onChange:e=>this.props.setEmail(e.target.value),onKeyDown:this.handleEnterPress}),Object(a.jsx)("label",{children:"Password"}),Object(a.jsx)("input",{type:"password",disabled:this.props.submit,style:this.props.submit?{backgroundColor:"#D3D3D3",color:"grey",cursor:"not-allowed"}:{},required:!0,value:this.props.password,onChange:e=>this.props.setPassword(e.target.value),onKeyDown:this.handleEnterPress}),Object(a.jsx)("p",{}),Object(a.jsx)(p.b,{to:"/forgot-password",children:"Forgot your password?"}),Object(a.jsxs)("div",{className:"btnContainer",children:[Object(a.jsx)("button",{onClick:this.handleSubmit,disabled:this.props.submit,style:this.props.submit?{backgroundColor:"grey",cursor:"not-allowed"}:{},children:"Log In"}),Object(a.jsxs)("p",{children:["Not a Member yet?",Object(a.jsx)("span",{children:Object(a.jsx)(p.b,{to:"/email-confirmation",children:"Sign Up"})})]})]}),Object(a.jsxs)(y.a,{open:this.state.open,onClose:this.handleClose,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(a.jsx)(f.a,{id:"alert-dialog-title",children:"Forget anything?"}),Object(a.jsx)(v.a,{children:Object(a.jsx)(S.a,{id:"alert-dialog-description",children:"Please fill in all the required fields."})}),Object(a.jsx)(C.a,{children:Object(a.jsx)(w.a,{onClick:this.handleClose,color:"primary",autoFocus:!0,children:"Absolutely!"})})]})]})})}}var N=k,P=(s(156),s(28)),I=s.n(P),D=function(e,t){return{type:"LOGIN",payload:{userID:e,email:t}}},A=function(e,t){return{type:"SIGNUP",payload:{userID:e,email:t}}},E=function(){return{type:"LOGOUT"}},L=function(e){return{type:"SETEMAIL",payload:e}},R=function(e,t,s,a){return{type:"SETNEWPROFILE",payload:{id:e,color:t,animal:s,age:a}}},T=function(e){return{type:"SETPROFILES",payload:e}},F=function(e){return{type:"SETCURRENTPROFILE",payload:e}},q=function(e,t){return{type:"SETACTIVESTORY",payload:{id:e,title:t}}},z=s(19),U=s(25),W=s(246);class B extends i.Component{constructor(...e){super(...e),this.state={userID:this.props.cookies.get("userID")||"",email:"",password:"",valid:!1,submit:!1},this.setEmail=e=>{this.validateEmail(e)?this.setState({email:e,valid:!0}):this.setState({email:e,valid:!1})},this.setPassword=e=>{""!==e&&this.validateEmail(this.state.email)?this.setState({password:e,valid:!0}):this.setState({password:e,valid:!1})},this.clearInputs=()=>{this.setState({email:"",password:""})},this.validateEmail=()=>!!/^[a-zA-Z0-9.]+@(?:[a-zA-Z0-9]+.)+[A-Za-z0-9]+$/.test(this.state.email),this.validatePassword=e=>e.length>0,this.componentDidMount=async()=>{"success"===(await O.a.post("/server/user/authenticate",{},{withCredentials:!0})).data.message&&this.props.history.push("/profile")},this.handleLogin=async()=>{this.setState({submit:!0});const e=await O.a.post("/server/user/login",I.a.stringify({username:this.state.email,password:this.state.password}),{withCredentials:!0,headers:{"content-type":"application/x-www-form-urlencoded;charset=utf-8"}});200===e.status&&"success"===e.data.message?(this.props.login(e.data.userID,this.state.email),this.props.cookies.set("userID",e.data.userID,{path:"/",maxAge:86400,sameSite:"none",secure:!0}),this.props.history.push("/profile")):this.setState({submit:!1})},this.setValid=e=>{this.setState({valid:e})}}render(){return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(m.a,{children:Object(a.jsx)("title",{children:"Storybook Academy | Login"})}),Object(a.jsx)("div",{className:"LoginPage",children:Object(a.jsx)(N,{email:this.state.email,setEmail:this.setEmail,password:this.state.password,setPassword:this.setPassword,handleLogin:this.handleLogin,validateEmail:this.validateEmail,valid:this.state.valid,setValid:this.setValid,submit:this.state.submit})})]})}}var M=Object(z.b)((e=>({userID:e.userInfo.userID})),(e=>Object(U.a)({login:D},e)))(Object(W.a)(B)),$=s(71),G=s(72),K=s(76),Q=s(74),Z=s(247),H=s(257),V=(s(160),function(e){Object(K.a)(s,e);var t=Object(Q.a)(s);function s(){var e;Object($.a)(this,s);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(e=t.call.apply(t,[this].concat(i))).state={question1:!1,question2:!1,valid:!1,open:!1},e.componentDidUpdate=function(t,s){!1===s.valid&&e.state.question1&&e.state.question2&&e.setState({valid:!0})},e.handleClickOpen=function(){e.setState({open:!0})},e.handleClose=function(){e.setState({open:!1})},e.handleQuestion1=function(){e.setState({question1:!e.state.question1})},e.handleQuestion2=function(){e.setState({question2:!e.state.question2})},e.handleSubmit=function(){if(e.state.valid)return e.props.setAsked(!0),e.props.history.push("/signup");e.handleClickOpen()},e}return Object(G.a)(s,[{key:"render",value:function(){return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(m.a,{children:Object(a.jsx)("title",{children:"Storybook Academy | Sign up Security Check"})}),Object(a.jsxs)("div",{className:"sec-checkup-container",style:{margin:20,padding:10},children:[Object(a.jsx)(d.a,{className:"sec-checkup-header",children:"Sign up Security Check"}),Object(a.jsx)("form",{children:Object(a.jsxs)(Z.a,{container:!0,style:{paddingTop:15},children:[Object(a.jsxs)(Z.a,{item:!0,xs:12,style:{paddingBottom:10,margin:30,fontSize:30},children:["I have a child between 7 - 9 years of age who is interested in Storybook Academy",Object(a.jsx)(H.a,{required:!0,checked:this.state.question1,color:"primary",onChange:this.handleQuestion1})]}),Object(a.jsxs)(Z.a,{item:!0,xs:12,style:{paddingBottom:30,margin:30,fontSize:30},children:["I am the parent, legal guardian or educational organization of that child",Object(a.jsx)(H.a,{required:!0,checked:this.state.question2,color:"primary",onChange:this.handleQuestion2})]})]})}),Object(a.jsx)("button",{onClick:this.handleSubmit,id:"proceed-btn",children:"Proceed"}),Object(a.jsxs)(y.a,{open:this.state.open,onClose:this.handleClose,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(a.jsx)(f.a,{id:"alert-dialog-title",children:"Forget anything?"}),Object(a.jsx)(v.a,{children:Object(a.jsx)(S.a,{id:"alert-dialog-description",children:"Please Answer All The Questions!"})}),Object(a.jsx)(C.a,{children:Object(a.jsx)(w.a,{onClick:this.handleClose,color:"primary",autoFocus:!0,children:"Absolutely!"})})]})]})]})}}]),s}(i.Component)),J=Object(c.g)(V),Y=s(114);class _ extends i.Component{constructor(...e){super(...e),this.state={}}render(){return Object(a.jsx)("section",{className:"signup",children:Object(a.jsxs)("div",{className:"signupContainer",style:{marginTop:"10%"},children:[this.props.submit?Object(a.jsx)("h1",{children:"Signing Up..."}):Object(a.jsx)("h1",{children:"Sign Up"}),Object(a.jsx)("label",{children:"Enter the OTP code we sent you via email"}),Object(a.jsx)("input",{type:"text",autoFocus:!0,required:!0,disabled:this.props.submit,style:this.props.submit?{backgroundColor:"#D3D3D3",color:"grey",cursor:"not-allowed"}:{},placeholder:"6 digit code",value:this.props.otp,onChange:e=>this.props.setOtp(e.target.value)}),Object(a.jsx)("label",{children:"Password"}),Object(a.jsx)("input",{type:"password",required:!0,disabled:this.props.submit,style:this.props.submit?{backgroundColor:"#D3D3D3",color:"grey",cursor:"not-allowed"}:{},value:this.props.password,onChange:e=>this.props.setPassword(e.target.value)}),Object(a.jsx)("label",{children:"First Name"}),Object(a.jsx)("input",{type:"text",autoFocus:!0,required:!0,disabled:this.props.submit,style:this.props.submit?{backgroundColor:"#D3D3D3",color:"grey",cursor:"not-allowed"}:{},value:this.props.firstname,onChange:e=>this.props.setFirstname(e.target.value)}),Object(a.jsx)("label",{children:"Last Name"}),Object(a.jsx)("input",{type:"text",required:!0,disabled:this.props.submit,style:this.props.submit?{backgroundColor:"#D3D3D3",color:"grey",cursor:"not-allowed"}:{},value:this.props.lastname,onChange:e=>this.props.setLastname(e.target.value)}),Object(a.jsx)("label",{children:"Organization"}),Object(a.jsx)("input",{type:"text",placeholder:"optional",disabled:this.props.submit,style:this.props.submit?{backgroundColor:"#D3D3D3",color:"grey",cursor:"not-allowed"}:{},value:this.props.organization,onChange:e=>this.props.setOrganization(e.target.value)}),Object(a.jsx)("label",{children:"Country"}),Object(a.jsx)(Y.a,{id:"country-dropdown",disabled:this.props.submit,style:this.props.submit?{backgroundColor:"#D3D3D3",color:"grey",cursor:"not-allowed"}:{},value:this.props.country,onChange:e=>this.props.setCountry(e)}),Object(a.jsxs)("div",{children:[Object(a.jsx)("p",{style:{fontSize:22,display:"inline-block"},children:"I agree to the terms of services"}),Object(a.jsx)(H.a,{required:!0,checked:this.props.checked,disabled:this.props.submit,color:"primary",onChange:()=>this.props.setChecked(!this.props.checked),style:{display:"inline-block"}})]}),Object(a.jsx)("div",{className:"btnContainer",children:Object(a.jsx)("button",{onClick:this.props.handleSignup,disabled:this.props.submit,style:this.props.submit?{backgroundColor:"grey",cursor:"not-allowed"}:{},children:"Sign Up"})})]})})}}var X=_;s(161);var ee=Object(z.b)((e=>({email:e.userInfo.email,userID:e.userInfo.userID})),(e=>Object(U.a)({signup:A},e)))((function(e){const t=Object(c.f)(),[s,r]=Object(i.useState)(!1),[n,o]=Object(i.useState)(""),[l,d]=Object(i.useState)(""),[h,j]=Object(i.useState)(""),[u,b]=Object(i.useState)(""),[p,g]=Object(i.useState)(""),[x,k]=Object(i.useState)(""),[N,P]=Object(i.useState)(!1),[D,A]=Object(i.useState)(!1),[E,L]=Object(i.useState)(!1),R=()=>{A(!1)};Object(i.useEffect)((()=>{T(),setInterval((()=>this.authenticate()),6e5)}),[]);const T=async()=>{"success"===(await O.a.post("/server/user/authenticate",{},{withCredentials:!0})).data.message&&t.push("/profile")};return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(m.a,{children:Object(a.jsx)("title",{children:"Storybook Academy | Sign up"})}),Object(a.jsxs)("div",{className:"SignupPage",children:[s?Object(a.jsx)(X,{firstname:n,lastname:l,organization:h,country:u,otp:p,password:x,setOtp:g,setLastname:d,setFirstname:o,setOrganization:j,setCountry:b,setPassword:k,handleSignup:()=>{if(L(!0),N){const s={otp:p,email:e.email,password:x,firstname:n,lastname:l,organization:h,country:u};O()({method:"post",url:"/server/user/register",data:I.a.stringify(s),headers:{"content-type":"application/x-www-form-urlencoded;charset=utf-8"}}).then((s=>{200===s.status&&"success"===s.data.message?(e.signup(s.data.userID,e.email),t.push("/child-profile-form")):L(!1)}))}else A(!0)},checked:N,setChecked:P,submit:E}):Object(a.jsx)(J,{setAsked:r}),Object(a.jsxs)(y.a,{open:D,onClose:R,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(a.jsx)(f.a,{id:"alert-dialog-title",children:"Forget anything?"}),Object(a.jsx)(v.a,{children:Object(a.jsx)(S.a,{id:"alert-dialog-description",children:"Please Agree the Terms and Services!"})}),Object(a.jsx)(C.a,{children:Object(a.jsx)(w.a,{onClick:R,color:"primary",autoFocus:!0,children:"Close"})})]})]})]})})),te=s(255);s(162);const se=["7","8","9"],ae=["Blue","Red","Green","Pink","Purple","Orange","Yellow"],ie=["Dog","Cat","Horse","Rabbit","Dolphin","Bear","Kangaroo","Lion","Tiger","Bird"];class re extends i.Component{constructor(...e){super(...e),this.state={age:"",color:"",animal:"",valid:!1,open:!1,submit:!1},this.componentDidUpdate=(e,t)=>{!1===t.valid&&!1===t.submit&&""!==this.state.age&&""!==this.state.color&&""!==this.state.animal&&this.setState({valid:!0})},this.handleClickOpen=()=>{this.setState({open:!0})},this.handleClose=()=>{this.setState({open:!1})},this.handleAge=e=>{this.setState({age:e.target.value})},this.handleColor=e=>{this.setState({color:e.target.value})},this.handleAnimal=e=>{this.setState({animal:e.target.value})},this.handleSubmit=()=>{if(this.state.valid){this.setState({submit:!0});const e={age:this.state.age,color:this.state.color,animal:this.state.animal},t=""!==this.props.userID?this.props.userID:this.props.cookies.get("userID");O()({method:"post",url:`/server/user/${t}/profile`,data:I.a.stringify(e),headers:{"content-type":"application/x-www-form-urlencoded;charset=utf-8"}}).then((e=>{200===e.status&&(e.data.message="success")?(this.props.setNewProfile(e.data.profileID,this.state.color,this.state.animal,this.state.age),this.props.history.push("/congrats")):this.setState({submit:!1})}))}else this.handleClickOpen()}}render(){return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(m.a,{children:Object(a.jsx)("title",{children:"Storybook Academy | Create New Child Profile"})}),Object(a.jsxs)("div",{style:{margin:20,padding:10},children:[Object(a.jsx)(d.a,{className:"Storybook-Academy-header",children:"Welcome to Storybook Academy"}),Object(a.jsx)(d.a,{className:"greetings-header",children:"To begin, tell us about yourself."}),Object(a.jsx)("form",{children:Object(a.jsxs)(Z.a,{container:!0,style:{paddingTop:15},children:[Object(a.jsxs)(Z.a,{item:!0,xs:12,style:{paddingBottom:10},children:[Object(a.jsx)(d.a,{children:"How old are you?"}),se.map((e=>Object(a.jsxs)(r.a.Fragment,{children:[Object(a.jsx)(te.a,{value:e,checked:this.state.age===e,color:"primary",onChange:this.handleAge}),e,Object(a.jsx)("br",{})]})))]}),Object(a.jsxs)(Z.a,{item:!0,xs:12,style:{paddingBottom:10},children:[Object(a.jsx)(d.a,{children:"What is your favourite color?"}),ae.map((e=>Object(a.jsxs)(r.a.Fragment,{children:[Object(a.jsx)(te.a,{value:e,checked:this.state.color===e,color:"primary",onChange:this.handleColor}),e,Object(a.jsx)("br",{})]})))]}),Object(a.jsxs)(Z.a,{item:!0,xs:12,style:{paddingBottom:10},children:[Object(a.jsx)(d.a,{children:"What is your favourite animal?"}),ie.map((e=>Object(a.jsxs)(r.a.Fragment,{children:[Object(a.jsx)(te.a,{value:e,checked:this.state.animal===e,color:"primary",onChange:this.handleAnimal}),e,Object(a.jsx)("br",{})]})))]})]})}),Object(a.jsx)("button",{onClick:this.handleSubmit,disabled:this.state.submit,style:this.state.submit?{backgroundColor:"grey",cursor:"not-allowed"}:{},children:"Submit"}),Object(a.jsxs)(y.a,{open:this.state.open,onClose:this.handleClose,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(a.jsx)(f.a,{id:"alert-dialog-title",children:"Forget anything?"}),Object(a.jsx)(v.a,{children:Object(a.jsx)(S.a,{id:"alert-dialog-description",children:"Please Answer All The Questions!"})}),Object(a.jsx)(C.a,{children:Object(a.jsx)(w.a,{onClick:this.handleClose,color:"primary",autoFocus:!0,children:"Absolutely!"})})]})]})]})}}var ne=Object(z.b)((e=>({userID:e.userInfo.userID})),(e=>Object(U.a)({setNewProfile:R},e)))(Object(c.g)(re)),oe=(s(163),s.p+"static/media/congrat.98834146.jpeg");var ce=Object(z.b)((e=>({newProfile:e.userInfo.yourChildren[0]})))((e=>Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(m.a,{children:Object(a.jsx)("title",{children:"Storybook Academy | Congratulation"})}),Object(a.jsxs)("div",{className:"profile-done-block",children:[Object(a.jsx)(d.a,{className:"profile-congrat-header",children:"Congratulations,"}),Object(a.jsxs)(d.a,{className:"profile-congrat-text",children:[e.newProfile.color," ",e.newProfile.animal,"!"]}),Object(a.jsx)("img",{src:oe,alt:"icon",style:{width:300,height:300,padding:0,margin:0}}),Object(a.jsxs)(d.a,{className:"profile-greetings-text",children:["Your unique profile ID number is:",Object(a.jsx)(d.a,{style:{fontWeight:"bold",fontSize:25,color:e.newProfile.color},children:e.newProfile.id}),"PLEASE WRITE THIS DOWN"]}),Object(a.jsx)("div",{children:Object(a.jsx)(p.b,{to:"/",children:Object(a.jsx)("button",{id:"profile-congrat-enter-btn",children:"Enter Home"})})}),Object(a.jsx)("div",{children:Object(a.jsx)(p.b,{to:"/child-profile-form",children:Object(a.jsx)("button",{id:"profile-congrat-create-btn",children:"Create Another Child Profile"})})})]})]})));s(164);class le extends i.Component{constructor(...e){super(...e),this.state={email:"",submit:!1},this.handleConfirm=()=>{this.setState({submit:!0}),O()({method:"post",url:"/server/user/verify",data:I.a.stringify({email:this.state.email}),headers:{"content-type":"application/x-www-form-urlencoded;charset=utf-8"}}).then((e=>{200===e.status&&"success"===e.data.message?(this.props.changeEmail(this.state.email),this.props.history.push("/signup")):this.setState({submit:!1})}))}}render(){return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(m.a,{children:Object(a.jsx)("title",{children:"Storybook Academy | Email Confirmation"})}),Object(a.jsx)("section",{className:"email-confirm",children:Object(a.jsxs)("div",{className:"email-confirmContainer",style:{marginTop:"10%"},children:[this.state.submit?Object(a.jsx)("h1",{children:"Signing Up..."}):Object(a.jsx)("h1",{children:"Sign Up"}),Object(a.jsx)("label",{children:"Enter your email address"}),Object(a.jsx)("input",{type:"text",required:!0,disabled:this.state.submit,style:this.state.submit?{backgroundColor:"#D3D3D3",color:"grey",cursor:"not-allowed"}:{},value:this.state.email,onChange:e=>this.setState({email:e.target.value})}),Object(a.jsx)("div",{className:"btnContainer",children:Object(a.jsx)("button",{onClick:this.handleConfirm,disabled:this.state.submit,style:this.state.submit?{backgroundColor:"grey",cursor:"not-allowed"}:{},children:"Register"})})]})})]})}}var de=Object(z.b)((e=>({})),(e=>Object(U.a)({changeEmail:L},e)))(le),he=(s(165),function(e){Object(K.a)(s,e);var t=Object(Q.a)(s);function s(){var e;Object($.a)(this,s);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(e=t.call.apply(t,[this].concat(i))).state={email:"",password:"",otp:"",open:!1,next:!1,validStep1:!1,validStep2:!1},e.handleClickOpen=function(){e.setState({open:!0})},e.handleClose=function(){e.setState({open:!1})},e.componentDidUpdate=function(t,s){!s.validStep1&&e.validateEmail(e.state.email)&&e.setState({validStep1:!0}),s.validStep2||""===e.state.otp||""===e.state.password||e.setState({validStep2:!0})},e.handleSubmit=function(){e.state.validStep1?O()({method:"post",url:"/server/user/forgot",data:I.a.stringify({email:e.state.email}),headers:{"content-type":"application/x-www-form-urlencoded;charset=utf-8"}}).then((function(t){200===t.status&&"success"===t.data.message&&e.setState({next:!0})})):e.handleClickOpen()},e.handleReset=function(){e.state.validStep2?O()({method:"patch",url:"/server/user/reset",data:I.a.stringify({otp:e.state.otp,password:e.state.password}),headers:{"content-type":"application/x-www-form-urlencoded;charset=utf-8"}}).then((function(t){console.log(t),200===t.status&&"success"===t.data.message&&e.props.history.push("/login")})):e.handleClickOpen()},e.validateEmail=function(){return!!/^[a-zA-Z0-9]+@(?:[a-zA-Z0-9]+\.)+[A-Za-z]+$/.test(e.state.email)},e}return Object(G.a)(s,[{key:"render",value:function(){var e=this;return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(m.a,{children:Object(a.jsx)("title",{children:"Storybook Academy | Forgot Password"})}),this.state.next?Object(a.jsx)("section",{className:"forgotPassword",children:Object(a.jsxs)("div",{className:"forgotPasswordContainer",style:{marginTop:"10%"},children:[Object(a.jsx)("h1",{children:"Reset Password"}),Object(a.jsx)("label",{children:"Enter the 6-digit code we sent you via Email"}),Object(a.jsx)("input",{type:"text",autoFocus:!0,required:!0,value:this.state.otp,onChange:function(t){return e.setState({otp:t.target.value})}}),Object(a.jsx)("label",{children:"Password"}),Object(a.jsx)("input",{type:"password",required:!0,value:this.state.password,onChange:function(t){return e.setState({password:t.target.value})}}),Object(a.jsx)("div",{className:"btnContainer",children:Object(a.jsx)("button",{onClick:this.handleReset,children:"Reset"})})]})}):Object(a.jsx)("section",{className:"forgotPassword",children:Object(a.jsxs)("div",{className:"forgotPasswordContainer",style:{marginTop:"10%"},children:[Object(a.jsx)("h1",{children:"Reset Password"}),Object(a.jsx)("label",{children:"Enter your registered Email Address"}),Object(a.jsx)("input",{type:"text",autoFocus:!0,required:!0,value:this.state.email,onChange:function(t){return e.setState({email:t.target.value})}}),Object(a.jsx)("div",{className:"btnContainer",children:Object(a.jsx)("button",{onClick:this.handleSubmit,children:"Submit"})})]})}),Object(a.jsxs)(y.a,{open:this.state.open,onClose:this.handleClose,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(a.jsx)(f.a,{id:"alert-dialog-title",children:"Forget anything?"}),Object(a.jsx)(v.a,{children:Object(a.jsx)(S.a,{id:"alert-dialog-description",children:"Please fill in all the required fields."})}),Object(a.jsx)(C.a,{children:Object(a.jsx)(w.a,{onClick:this.handleClose,color:"primary",autoFocus:!0,children:"Absolutely!"})})]})]})}}]),s}(i.Component));s(166);class je extends i.Component{constructor(...e){super(...e),this.state={userID:this.props.cookies.get("userID")||"",validSession:!0},this.getProfiles=()=>{O.a.get(`/server/user/${this.state.userID}/profiles`).then((e=>{"success"===e.data.message&&this.props.setProfiles(e.data.profiles)}))},this.handleLogout=()=>{O.a.get("/server/user/logout",{withCredentials:!0}).then((e=>{"success"===e.data.message&&(this.props.logout(),this.props.cookies.remove("userID"),this.props.cookies.remove("profileID"),this.props.cookies.set("connect.sid","",{path:"/",maxAge:0,sameSite:"none",secure:!0}),this.props.cookies.remove("connect.sid"),this.props.history.push("/login"))}))},this.handleChooseProfile=e=>{this.props.setCurrentProfile(e),this.props.cookies.set("profileID",e,{path:"/",maxAge:86400,sameSite:"none",secure:!0})},this.componentDidMount=()=>{this.authenticate(),this.getProfiles(),setInterval((()=>this.authenticate()),6e5)},this.authenticate=async()=>{"success"!==(await O.a.post("/server/user/authenticate",{},{withCredentials:!0})).data.message&&this.props.history.push("/login")}}render(){return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(m.a,{children:Object(a.jsx)("title",{children:"Storybook Academy | Profile"})}),Object(a.jsxs)("div",{className:"profile-home-block",children:[Object(a.jsx)(d.a,{className:"profile-home-header",children:"Please select who is reading today"}),Object(a.jsx)("hr",{style:{width:"66%",margin:"auto",padding:30}}),this.props.childrenProfile.map(((e,t)=>Object(a.jsx)("div",{id:t,style:{border:"1px solid grey",borderRadius:20,width:500,margin:"auto",marginBottom:40},children:Object(a.jsxs)(p.b,{to:"/meetings",onClick:()=>this.handleChooseProfile(e._id),children:[Object(a.jsxs)(d.a,{className:"profile-home-id-text",style:{fontWeight:"bold",fontSize:25,color:e.color,marginTop:20},children:["ID: ",e._id]}),Object(a.jsx)("img",{src:`data:image/jpeg;base64,${e.icon}`,alt:"icon",style:{width:300,height:300,padding:0,margin:0},onClick:()=>this.props.setCurrentProfile(e)})]})}))),Object(a.jsx)("div",{children:Object(a.jsx)(p.b,{to:"/child-profile-form",children:Object(a.jsx)("button",{id:"profile-home-create-btn",children:"Create Another Child Profile"})})}),Object(a.jsx)("div",{children:Object(a.jsx)("button",{id:"profile-home-logout-btn",onClick:this.handleLogout,children:"Log out"})})]})]})}}var ue=Object(z.b)((e=>({childrenProfile:e.userInfo.yourChildren,userID:e.userInfo.userID})),(e=>Object(U.a)({setProfiles:T,setCurrentProfile:F,logout:E},e)))(Object(W.a)(je)),be=s(248),pe=s(249),me=s(250),ge=s(251),Oe=(s(167),s.p+"static/media/children.4545a2d3.jpg");function xe(e){const{handleOpen:t,open:s,story:i,handleChooseStory:r}=e;return Object(a.jsxs)(y.a,{open:s,onClose:()=>t(!1),maxWidth:"lg",children:[Object(a.jsx)(f.a,{children:Object(a.jsx)(d.a,{variant:"h3",children:i.title})}),Object(a.jsxs)(v.a,{children:[Object(a.jsxs)(d.a,{style:{fontSize:25},children:["Author: ",i.author]}),Object(a.jsxs)(d.a,{style:{fontSize:25},children:["Pages: ",i.pages]}),Object(a.jsx)("img",{src:Oe,alt:"thumbnail",style:{width:200,height:200,margin:20}}),Object(a.jsx)("div",{style:{fontSize:20,marginTop:15},children:i.description})]}),Object(a.jsxs)(C.a,{children:[Object(a.jsx)(w.a,{variant:"primary",onClick:()=>t(!1),children:"Back"}),Object(a.jsx)(w.a,{variant:"primary",onClick:()=>r(i.title),children:"Read"})]})]})}class ye extends i.Component{constructor(...e){super(...e),this.state={titles:[],open:!1,chosenStory:{title:"",description:"",author:"",ages:[""]}},this.getTitles=()=>{O.a.get("/server/library/titles").then((e=>{"success"===e.data.message&&this.setState({titles:e.data.stories})}))},this.componentDidMount=()=>{this.getTitles()},this.handleChooseStory=e=>{this.props.setActiveStory(e),this.props.cookies.set("activeStory",e,{path:"/",maxAge:86400,sameSite:"none",secure:!0}),this.props.toggleLeft("read-story")},this.handleOpen=e=>{this.setState({open:e})},this.handlePreview=e=>{this.setState({open:!0,chosenStory:e})}}render(){return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(d.a,{className:"library-page-header",variant:"h2",children:"Library"}),Object(a.jsx)("div",{className:"library-page-block",children:Object(a.jsx)(be.a,{sx:{width:"100%",maxWidth:360,bgcolor:"background.paper"},children:this.state.titles.map(((e,t)=>Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(pe.a,{alignItems:"flex-start",onClick:()=>{this.handlePreview(e)},style:{cursor:"pointer"},className:"lib-story",children:Object(a.jsx)(me.a,{primary:`Title: ${e.title}`,secondary:Object(a.jsxs)(r.a.Fragment,{children:[Object(a.jsxs)(d.a,{component:"span",variant:"body1",color:"text.primary",style:{fontStyle:"italic",marginBottom:10},children:["Author: ",e.author]}),Object(a.jsxs)(d.a,{variant:"body1",children:["Pages: ",e.pages]}),Object(a.jsxs)(d.a,{variant:"body1",children:["Ages: ",e.ages[0]," and ",e.ages[1]]})]})})}),Object(a.jsx)(ge.a,{variant:"inset",component:"li"})]})))})}),Object(a.jsx)(xe,{handleOpen:this.handleOpen,open:this.state.open,story:this.state.chosenStory,handleChooseStory:this.handleChooseStory})]})}}var fe=Object(z.b)((e=>({})),(e=>Object(U.a)({setActiveStory:q},e)))(Object(W.a)(ye)),ve=(s(168),s(252));const Se=e=>{const[t,s]=Object(i.useState)([]),r=Object(z.d)((e=>e.userInfo.userID)),[n]=Object(ve.a)(),o=Object(z.c)();return Object(i.useEffect)((()=>{!async function(){const e=""!==r?r:n.userID,t=await O.a.get(`/server/user/${e}/students`);"success"===t.data.message&&s(t.data.students)}()}),[]),Object(i.useEffect)((()=>{!async function(){const e=""!==r?r:n.userID,t=await O.a.get(`/server/user/${e}/students`);"success"===t.data.message&&s(t.data.students)}()}),[e.resetKey]),Object(a.jsx)("div",{className:"friendslist-innerdiv",children:t.map(((t,s)=>Object(a.jsxs)("div",{className:"friend-line",onClick:()=>{},children:[t.email+"\n("+t._id+")",Object(a.jsx)("span",{children:Object(a.jsx)(w.a,{onClick:()=>{o({type:"SETFRIENDEMAIL",payload:{email:t.email}}),e.toggleRight("calling")},children:"Call"})})]},s)))},e.resetKey)},Ce=e=>{const[t,s]=Object(i.useState)(""),r=Object(i.useRef)(null),n=Object(z.d)((e=>e.userInfo.userID)),[o]=Object(ve.a)();Object(i.useEffect)((()=>{r.current.focus()}));const c=async a=>{a.preventDefault();const i=""!==n?n:o.userID,r=await O.a.post(`/server/user/${i}/student`,I.a.stringify({email:t,username:i}),{headers:{"content-type":"application/x-www-form-urlencoded;charset=utf-8"}});"match"===r.data.message?alert("Friend already in your friends list!"):"invalid"===r.data.message?alert("Invalid friend's email, please check again!"):e.setResetKey(!e.resetKey),s("")};return Object(a.jsx)("form",{onSubmit:c,className:"addfriend-form",children:Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("input",{placeholder:"Add a new friend",value:t,onChange:e=>{s(e.target.value)},name:"text",className:"addfriend-input",ref:r}),Object(a.jsx)(w.a,{onClick:c,className:"addfriend-button",children:"Add Friend"})]})})};function we(e){const[t,s]=Object(i.useState)("");return Object(a.jsxs)("div",{className:"enter-room-div",children:[Object(a.jsx)("label",{children:"Enter Room ID"}),Object(a.jsx)("input",{type:"text",placeholder:"1b0dce1d-a14c-4345-9ee8-ecc811436769",onChange:e=>s(e.target.value)}),Object(a.jsx)(w.a,{onClick:()=>{e.joinRoom(t),e.toggleRight("calling")},children:"Join"})]})}var ke=function(e){const[t,s]=Object(i.useState)(!0);return Object(a.jsxs)("div",{className:"friendslist-outerdiv",children:[Object(a.jsx)("h1",{style:{fontSize:60},children:"Friends List"}),Object(a.jsx)(Ce,{resetKey:t,setResetKey:s}),Object(a.jsx)(Se,{toggleRight:e.toggleRight},t),Object(a.jsx)(we,{joinRoom:e.joinRoom,toggleRight:e.toggleRight})]})},Ne=s(62),Pe=s(254),Ie=s(118),De=s.n(Ie),Ae=s(117),Ee=s.n(Ae),Le=s(116),Re=s.n(Le),Te=(s(199),s(115)),Fe=s.n(Te);Ne.c.GlobalWorkerOptions.workerSrc=`//cdnjs.cloudflare.com/ajax/libs/pdf.js/${Ne.c.version}/pdf.worker.js`;class qe extends i.Component{constructor(...e){super(...e),this.state={numPages:null,pageNumber:1,prevAvailable:!1,nextAvailable:!1,tempPageNo:1,file:null,isLoading:!0},this.onDocumentLoadSuccess=({numPages:e})=>{e>1?this.setState({numPages:e,nextAvailable:!0}):this.setState({numPages:e})},this.goToPrevPage=()=>{this.state.pageNumber-1===1?this.setState((e=>({pageNumber:e.pageNumber-1,prevAvailable:!1,nextAvailable:!0}))):this.setState((e=>({pageNumber:e.pageNumber-1,nextAvailable:!0})))},this.goToNextPage=()=>{this.state.pageNumber+1===this.state.numPages?this.setState((e=>({pageNumber:e.pageNumber+1,nextAvailable:!1,prevAvailable:!0}))):this.setState((e=>({pageNumber:e.pageNumber+1,prevAvailable:!0})))},this.goToPage=()=>{this.state.tempPageNo>0&&this.state.tempPageNo<=this.state.numPages?this.setState({pageNumber:this.state.tempPageNo}):console.log("Invalid")},this.handleChange=e=>{if(""!==e.target.value){let t=e.target.value;isNaN(t)||(t=parseInt(t),this.setState({tempPageNo:t}))}},this.componentDidUpdate=(e,t)=>{if(t.pageNumber!==this.state.pageNumber){var s=!1,a=!1;this.state.pageNumber>1&&this.state.pageNumber<this.state.numPages?(s=!0,a=!0):this.state.pageNumber<=1?a=!0:this.state.pageNumber>=this.state.numPages&&(s=!0),this.setState({prevAvailable:s,nextAvailable:a})}}}componentDidMount(){O()({method:"GET",url:"/server/library/story",params:{title:this.props.title},responseType:"blob"}).then((e=>{const t=new Blob([e.data],{type:"application/pdf"});this.setState({file:t,isLoading:!1})}))}render(){const{pageNumber:e,numPages:t}=this.state;return this.state.isLoading?Object(a.jsxs)("div",{className:"pdf-display-loading",children:[Object(a.jsx)("h1",{children:"Loading story"}),Object(a.jsx)(Fe.a,{size:100})]}):Object(a.jsxs)("div",{className:"pdf-display-container",children:[Object(a.jsx)("div",{children:Object(a.jsxs)(w.a,{variant:"outlined",color:"secondary",onClick:this.props.backToLibrary,style:{width:210,margin:25},children:[Object(a.jsx)(Re.a,{style:{marginRight:10}}),"Back to Library"]})}),Object(a.jsx)("h3",{children:this.props.title}),Object(a.jsx)(Ne.a,{file:this.state.file,onLoadSuccess:this.onDocumentLoadSuccess,children:Object(a.jsx)(Ne.b,{pageNumber:e})}),Object(a.jsxs)("p",{className:"page-info",children:["Page ",e," of ",t]}),Object(a.jsxs)("div",{children:[Object(a.jsx)(Pe.a,{id:"standard-basic",label:"Jump To",placeholder:"Ex: 1",onChange:e=>this.handleChange(e),style:{maxWidth:80,maxHeight:30}}),Object(a.jsx)("span",{children:Object(a.jsx)(w.a,{onClick:this.goToPage,style:{maxWidth:40,marginTop:10},children:"Go!"})}),Object(a.jsxs)("span",{className:"prev-next-block",children:[this.state.prevAvailable?Object(a.jsxs)(w.a,{variant:"outlined",color:"primary",onClick:this.goToPrevPage,style:{maxWidth:175,marginLeft:"5%"},children:[Object(a.jsx)(Ee.a,{}),"Previous Page"]}):Object(a.jsx)(a.Fragment,{}),this.state.nextAvailable?Object(a.jsxs)(w.a,{variant:"outlined",color:"primary",disabled:!this.state.nextAvailable,onClick:this.goToNextPage,style:{maxWidth:175,marginLeft:"5%"},children:["Next Page",Object(a.jsx)(De.a,{})]}):Object(a.jsx)(a.Fragment,{})]})]})]})}}var ze=qe;var Ue=e=>{const[t]=Object(ve.a)(),s=t.activeStory||"";return Object(a.jsx)(ze,{title:s,backToLibrary:()=>e.toggleLeft("library")})};s(106);var We=e=>{const[t,s]=Object(i.useState)(""),r=Object(z.d)((e=>e.userInfo.userID)),n=Object(z.d)((e=>e.userInfo.friendEmail)),[o]=Object(ve.a)();return Object(i.useEffect)((()=>{if(""===e.roomID){!async function(){const e=await O()({method:"post",url:"/server/user/send",data:I.a.stringify({username:""===r?o.userID:r,email:n}),headers:{"content-type":"application/x-www-form-urlencoded;charset=utf-8"}});"success"===e.data.message&&s(e.data.hostRoomUrl)}()}else s(`https://storybookacademy101.whereby.com/${e.roomID}`)}),[r,n]),Object(a.jsxs)("div",{className:"videocall-iframe-div",children:[Object(a.jsx)("iframe",{title:"videocall-iframe",className:"videocall-iframe-element",src:t,allow:"camera; microphone; fullscreen; speaker; display-capture"}),Object(a.jsx)("button",{style:{width:75,margin:5},onClick:()=>e.toggleRight("friends-list"),children:"Back"})]})};class Be extends i.Component{constructor(...e){super(...e),this.state={toggleLeft:"library",toggleRight:"friends-list",roomID:""},this.joinRoom=e=>{this.setState({roomID:e})},this.setLeft=e=>{this.setState({toggleLeft:e})},this.setRight=e=>{this.setState({toggleRight:e})},this.componentDidMount=()=>{this.authenticate(),setInterval((()=>this.authenticate()),6e5)},this.authenticate=async()=>{"success"!==(await O.a.post("/server/user/authenticate",{},{withCredentials:!0})).data.message&&this.props.history.push("/login")}}render(){return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(m.a,{children:Object(a.jsx)("title",{children:"Storybook Academy | Meeting"})}),Object(a.jsxs)("div",{className:"videocall-page-outerdiv",children:[Object(a.jsx)("div",{className:"videocall-page-leftdiv",children:"library"===this.state.toggleLeft?Object(a.jsx)(fe,{toggleLeft:e=>this.setLeft(e)}):Object(a.jsx)(Ue,{toggleLeft:e=>this.setLeft(e)})}),Object(a.jsx)("div",{className:"videocall-page-rightdiv",children:"friends-list"===this.state.toggleRight?Object(a.jsx)(ke,{toggleRight:e=>this.setRight(e),joinRoom:this.joinRoom}):Object(a.jsx)(We,{toggleRight:e=>this.setRight(e),roomID:this.state.roomID})})]})]})}}var Me=Be;var $e=()=>Object(a.jsxs)(c.c,{children:[Object(a.jsx)(c.a,{path:"/login",exact:!0,component:M}),Object(a.jsx)(c.a,{path:"/signup",exact:!0,component:ee}),Object(a.jsx)(c.a,{path:"/child-profile-form",exact:!0,component:ne}),Object(a.jsx)(c.a,{path:"/congrats",exact:!0,component:ce}),Object(a.jsx)(c.a,{path:"/email-confirmation",exact:!0,component:de}),Object(a.jsx)(c.a,{path:"/forgot-password",exact:!0,component:he}),Object(a.jsx)(c.a,{path:"/profile",exact:!0,component:ue}),Object(a.jsx)(c.a,{path:"/meetings",exact:!0,component:Me}),Object(a.jsx)(c.a,{path:"/",exact:!0,component:x})]});s(205);var Ge=function(){return Object(a.jsx)("div",{className:"App",children:Object(a.jsx)($e,{})})},Ke=(s(206),s(119)),Qe=s(27),Ze={userID:"",email:"",currentProfile:{},yourChildren:[],friends:[],activeStory:{},friendEmail:""},He=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ze,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN":case"SIGNUP":return Object(Qe.a)(Object(Qe.a)({},e),{},{userID:t.payload.userID,email:t.payload.email});case"SETEMAIL":return Object(Qe.a)(Object(Qe.a)({},e),{},{email:t.payload});case"SETNEWPROFILE":return Object(Qe.a)(Object(Qe.a)({},e),{},{yourChildren:[].concat(Object(Ke.a)(e.yourChildren),[t.payload])});case"SETPROFILES":return Object(Qe.a)(Object(Qe.a)({},e),{},{yourChildren:t.payload});case"SETCURRENTPROFILE":return Object(Qe.a)(Object(Qe.a)({},e),{},{currentProfile:t.payload});case"SETACTIVESTORY":return Object(Qe.a)(Object(Qe.a)({},e),{},{activeStory:t.payload});case"SETFRIENDEMAIL":return Object(Qe.a)(Object(Qe.a)({},e),{},{friendEmail:t.payload.email});case"LOGOUT":return Ze;default:return e}},Ve=Object(U.b)({userInfo:He}),Je=s(253),Ye=Object(U.c)(Ve);o.a.render(Object(a.jsx)(r.a.StrictMode,{children:Object(a.jsx)(Je.a,{children:Object(a.jsx)(z.a,{store:Ye,children:Object(a.jsx)(p.a,{children:Object(a.jsx)(Ge,{})})})})}),document.getElementById("root"))},90:function(e,t,s){}},[[207,1,2]]]);
//# sourceMappingURL=main.608fc8ee.chunk.js.map