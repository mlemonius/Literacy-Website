(this["webpackJsonpliteracy-website"]=this["webpackJsonpliteracy-website"]||[]).push([[0],{105:function(e,t){},106:function(e,t,a){},133:function(e,t,a){},156:function(e,t,a){},160:function(e,t,a){},161:function(e,t,a){},162:function(e,t,a){},163:function(e,t,a){},164:function(e,t,a){},165:function(e,t,a){},166:function(e,t,a){},167:function(e,t,a){},168:function(e,t,a){},194:function(e,t){},195:function(e,t){},196:function(e,t){},197:function(e,t){},198:function(e,t){},199:function(e,t,a){},205:function(e,t,a){},207:function(e,t,a){"use strict";a.r(t);var s=a(1),i=a(0),n=a.n(i),r=a(15),c=a.n(r),o=(a(133),a(18)),l=a(236),d=a(63);a(90);class h extends i.Component{constructor(...e){super(...e),this.state={}}render(){return Object(s.jsx)("div",{className:"Info-block",children:Object(s.jsxs)(l.a,{className:"header-container",children:[Object(s.jsx)("h1",{className:"page-title",style:{color:"#434343",margin:15},children:"Storybook Academy"}),Object(s.jsx)(d.a,{style:{textAlign:"center"},color:"textSecondary",children:"Lorem ipsum dolor sit amet, consectetur adipiscing elit."})]})})}}var j=h,u=a(112),p=a.n(u),b=a(26),g=a(21),m=a(13),O=a.n(m);var x=()=>{const e=Object(o.f)(),t=async()=>{"success"===(await O.a.post("/server/user/authenticate",{},{withCredentials:!0})).data.message?e.push("/profile"):e.push("/login")};return Object(i.useEffect)((()=>{t(),setInterval((()=>t()),6e5)}),[]),Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)(g.a,{children:Object(s.jsx)("title",{children:"Storybook Academy | Welcome"})}),Object(s.jsxs)("div",{className:"LandingDiv",children:[Object(s.jsx)(j,{}),Object(s.jsx)("div",{style:{margin:40,marginBottom:5,textAlign:"center"},children:Object(s.jsx)(p.a,{})}),Object(s.jsx)("div",{className:"landing-page-login",children:Object(s.jsx)(b.b,{to:"/login",children:Object(s.jsx)("button",{className:"landing-page-button",children:"Login/Signup"})})})]})]})},f=a(33),y=a(34),v=a(37),S=a(36),C=a(258),w=a(241),k=a(242),N=a(243),P=a(244),I=a(245),A=function(e){Object(v.a)(a,e);var t=Object(S.a)(a);function a(){var e;Object(f.a)(this,a);for(var s=arguments.length,i=new Array(s),n=0;n<s;n++)i[n]=arguments[n];return(e=t.call.apply(t,[this].concat(i))).state={open:!1},e.handleClickOpen=function(){e.setState({open:!0})},e.handleClose=function(){e.setState({open:!1})},e.handleEnterPress=function(t){"Enter"===t.key&&e.handleSubmit()},e.handleSubmit=function(){e.props.valid?e.props.handleLogin():e.handleClickOpen()},e}return Object(y.a)(a,[{key:"render",value:function(){var e=this;return Object(s.jsx)("section",{className:"login",children:Object(s.jsxs)("div",{className:"loginContainer",style:{marginTop:"10%"},children:[Object(s.jsx)("h1",{children:"Log In"}),Object(s.jsx)("label",{children:"Email"}),Object(s.jsx)("input",{type:"text",autoFocus:!0,required:!0,value:this.props.email,onChange:function(t){return e.props.setEmail(t.target.value)},onKeyDown:this.handleEnterPress}),Object(s.jsx)("label",{children:"Password"}),Object(s.jsx)("input",{type:"password",required:!0,value:this.props.password,onChange:function(t){return e.props.setPassword(t.target.value)},onKeyDown:this.handleEnterPress}),Object(s.jsx)("p",{}),Object(s.jsx)(b.b,{to:"/forgot-password",children:"Forgot your password?"}),Object(s.jsxs)("div",{className:"btnContainer",children:[Object(s.jsx)("button",{onClick:this.handleSubmit,children:"Log In"}),Object(s.jsxs)("p",{children:["Not a Member yet?",Object(s.jsx)("span",{children:Object(s.jsx)(b.b,{to:"/email-confirmation",children:"Sign Up"})})]})]}),Object(s.jsxs)(C.a,{open:this.state.open,onClose:this.handleClose,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(s.jsx)(w.a,{id:"alert-dialog-title",children:"Forget anything?"}),Object(s.jsx)(k.a,{children:Object(s.jsx)(N.a,{id:"alert-dialog-description",children:"Please fill in all the required fields."})}),Object(s.jsx)(P.a,{children:Object(s.jsx)(I.a,{onClick:this.handleClose,color:"primary",autoFocus:!0,children:"Absolutely!"})})]})]})})}}]),a}(i.Component),E=(a(156),a(31)),L=a.n(E),D=function(e,t){return{type:"LOGIN",payload:{userID:e,email:t}}},T=function(e,t){return{type:"SIGNUP",payload:{userID:e,email:t}}},F=function(){return{type:"LOGOUT"}},R=function(e){return{type:"SETEMAIL",payload:e}},q=function(e,t,a,s){return{type:"SETNEWPROFILE",payload:{id:e,color:t,animal:a,age:s}}},z=function(e){return{type:"SETPROFILES",payload:e}},W=function(e){return{type:"SETCURRENTPROFILE",payload:e}},B=function(e,t){return{type:"SETACTIVESTORY",payload:{id:e,title:t}}},U=a(19),M=a(25),G=a(246);class $ extends i.Component{constructor(...e){super(...e),this.state={userID:this.props.cookies.get("userID")||"",email:"",password:"",valid:!1},this.setEmail=e=>{this.validateEmail(e)?this.setState({email:e,valid:!0}):this.setState({email:e,valid:!1})},this.setPassword=e=>{""!==e&&this.validateEmail(this.state.email)?this.setState({password:e,valid:!0}):this.setState({password:e,valid:!1})},this.clearInputs=()=>{this.setState({email:"",password:""})},this.validateEmail=()=>!!/^[a-zA-Z0-9.]+@(?:[a-zA-Z0-9]+.)+[A-Za-z0-9]+$/.test(this.state.email),this.validatePassword=e=>e.length>0,this.componentDidMount=async()=>{"success"===(await O.a.post("/server/user/authenticate",{},{withCredentials:!0})).data.message&&this.props.history.push("/profile")},this.handleLogin=async()=>{const e=await O.a.post("/server/user/login",L.a.stringify({username:this.state.email,password:this.state.password}),{withCredentials:!0,headers:{"content-type":"application/x-www-form-urlencoded;charset=utf-8"}});200===e.status&&"success"===e.data.message&&(this.props.login(e.data.userID,this.state.email),this.props.cookies.set("userID",e.data.userID,{path:"/",maxAge:86400}),this.props.history.push("/profile"))},this.setValid=e=>{this.setState({valid:e})}}render(){return Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)(g.a,{children:Object(s.jsx)("title",{children:"Storybook Academy | Login"})}),Object(s.jsx)("div",{className:"LoginPage",children:Object(s.jsx)(A,{email:this.state.email,setEmail:this.setEmail,password:this.state.password,setPassword:this.setPassword,handleLogin:this.handleLogin,validateEmail:this.validateEmail,valid:this.state.valid,setValid:this.setValid})})]})}}var Q=Object(U.b)((e=>({userID:e.userInfo.userID})),(e=>Object(M.a)({login:D},e)))(Object(G.a)($)),Z=a(247),H=a(257),V=(a(160),function(e){Object(v.a)(a,e);var t=Object(S.a)(a);function a(){var e;Object(f.a)(this,a);for(var s=arguments.length,i=new Array(s),n=0;n<s;n++)i[n]=arguments[n];return(e=t.call.apply(t,[this].concat(i))).state={question1:!1,question2:!1,valid:!1,open:!1},e.componentDidUpdate=function(t,a){!1===a.valid&&e.state.question1&&e.state.question2&&e.setState({valid:!0})},e.handleClickOpen=function(){e.setState({open:!0})},e.handleClose=function(){e.setState({open:!1})},e.handleQuestion1=function(){e.setState({question1:!e.state.question1})},e.handleQuestion2=function(){e.setState({question2:!e.state.question2})},e.handleSubmit=function(){if(e.state.valid)return e.props.setAsked(!0),e.props.history.push("/signup");e.handleClickOpen()},e}return Object(y.a)(a,[{key:"render",value:function(){return Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)(g.a,{children:Object(s.jsx)("title",{children:"Storybook Academy | Sign up Security Check"})}),Object(s.jsxs)("div",{className:"sec-checkup-container",style:{margin:20,padding:10},children:[Object(s.jsx)(d.a,{className:"sec-checkup-header",children:"Sign up Security Check"}),Object(s.jsx)("form",{children:Object(s.jsxs)(Z.a,{container:!0,style:{paddingTop:15},children:[Object(s.jsxs)(Z.a,{item:!0,xs:12,style:{paddingBottom:10,margin:30,fontSize:30},children:["I have a child between 7 - 9 years of age who is interested in Storybook Academy",Object(s.jsx)(H.a,{required:!0,checked:this.state.question1,color:"primary",onChange:this.handleQuestion1})]}),Object(s.jsxs)(Z.a,{item:!0,xs:12,style:{paddingBottom:30,margin:30,fontSize:30},children:["I am the parent, legal guardian or educational organization of that child",Object(s.jsx)(H.a,{required:!0,checked:this.state.question2,color:"primary",onChange:this.handleQuestion2})]})]})}),Object(s.jsx)("button",{onClick:this.handleSubmit,id:"proceed-btn",children:"Proceed"}),Object(s.jsxs)(C.a,{open:this.state.open,onClose:this.handleClose,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(s.jsx)(w.a,{id:"alert-dialog-title",children:"Forget anything?"}),Object(s.jsx)(k.a,{children:Object(s.jsx)(N.a,{id:"alert-dialog-description",children:"Please Answer All The Questions!"})}),Object(s.jsx)(P.a,{children:Object(s.jsx)(I.a,{onClick:this.handleClose,color:"primary",autoFocus:!0,children:"Absolutely!"})})]})]})]})}}]),a}(i.Component)),Y=Object(o.g)(V),_=a(114),J=function(e){Object(v.a)(a,e);var t=Object(S.a)(a);function a(){var e;Object(f.a)(this,a);for(var s=arguments.length,i=new Array(s),n=0;n<s;n++)i[n]=arguments[n];return(e=t.call.apply(t,[this].concat(i))).state={},e}return Object(y.a)(a,[{key:"render",value:function(){var e=this;return Object(s.jsx)("section",{className:"signup",children:Object(s.jsxs)("div",{className:"signupContainer",style:{marginTop:"10%"},children:[Object(s.jsx)("h1",{children:"Sign Up"}),Object(s.jsx)("label",{children:"Enter the OTP code we sent you via email"}),Object(s.jsx)("input",{type:"text",autoFocus:!0,required:!0,placeholder:"6 digit code",value:this.props.otp,onChange:function(t){return e.props.setOtp(t.target.value)}}),Object(s.jsx)("label",{children:"Password"}),Object(s.jsx)("input",{type:"password",required:!0,value:this.props.password,onChange:function(t){return e.props.setPassword(t.target.value)}}),Object(s.jsx)("label",{children:"First Name"}),Object(s.jsx)("input",{type:"text",autoFocus:!0,required:!0,value:this.props.firstname,onChange:function(t){return e.props.setFirstname(t.target.value)}}),Object(s.jsx)("label",{children:"Last Name"}),Object(s.jsx)("input",{type:"text",required:!0,value:this.props.lastname,onChange:function(t){return e.props.setLastname(t.target.value)}}),Object(s.jsx)("label",{children:"Organization"}),Object(s.jsx)("input",{type:"text",placeholder:"optional",value:this.props.organization,onChange:function(t){return e.props.setOrganization(t.target.value)}}),Object(s.jsx)("label",{children:"Country"}),Object(s.jsx)(_.a,{id:"country-dropdown",value:this.props.country,onChange:function(t){return e.props.setCountry(t)}}),Object(s.jsxs)("div",{children:[Object(s.jsx)("p",{style:{fontSize:22,display:"inline-block"},children:"I agree to the terms of services"}),Object(s.jsx)(H.a,{required:!0,checked:this.props.checked,color:"primary",onChange:function(){return e.props.setChecked(!e.props.checked)},style:{display:"inline-block"}})]}),Object(s.jsx)("div",{className:"btnContainer",children:Object(s.jsx)("button",{onClick:this.props.handleSignup,children:"Sign Up"})})]})})}}]),a}(i.Component);a(161);var K=Object(U.b)((e=>({email:e.userInfo.email,userID:e.userInfo.userID})),(e=>Object(M.a)({signup:T},e)))((function(e){const t=Object(o.f)(),[a,n]=Object(i.useState)(!1),[r,c]=Object(i.useState)(""),[l,d]=Object(i.useState)(""),[h,j]=Object(i.useState)(""),[u,p]=Object(i.useState)(""),[b,m]=Object(i.useState)(""),[x,f]=Object(i.useState)(""),[y,v]=Object(i.useState)(!1),[S,A]=Object(i.useState)(!1),E=()=>{A(!1)};Object(i.useEffect)((()=>{D(),setInterval((()=>this.authenticate()),6e5)}),[]);const D=async()=>{"success"===(await O.a.post("/server/user/authenticate",{},{withCredentials:!0})).data.message&&t.push("/profile")};return Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)(g.a,{children:Object(s.jsx)("title",{children:"Storybook Academy | Sign up"})}),Object(s.jsxs)("div",{className:"SignupPage",children:[a?Object(s.jsx)(J,{firstname:r,lastname:l,organization:h,country:u,otp:b,password:x,setOtp:m,setLastname:d,setFirstname:c,setOrganization:j,setCountry:p,setPassword:f,handleSignup:()=>{if(y){const a={otp:b,email:e.email,password:x,firstname:r,lastname:l,organization:h,country:u};O()({method:"post",url:"/server/user/register",data:L.a.stringify(a),headers:{"content-type":"application/x-www-form-urlencoded;charset=utf-8"}}).then((a=>{200===a.status&&"success"===a.data.message&&(e.signup(a.data.userID,e.email),t.push("/child-profile-form"))}))}else A(!0)},checked:y,setChecked:v}):Object(s.jsx)(Y,{setAsked:n}),Object(s.jsxs)(C.a,{open:S,onClose:E,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(s.jsx)(w.a,{id:"alert-dialog-title",children:"Forget anything?"}),Object(s.jsx)(k.a,{children:Object(s.jsx)(N.a,{id:"alert-dialog-description",children:"Please Agree the Terms and Services!"})}),Object(s.jsx)(P.a,{children:Object(s.jsx)(I.a,{onClick:E,color:"primary",autoFocus:!0,children:"Close"})})]})]})]})})),X=a(255),ee=(a(162),["7","8","9"]),te=["Blue","Red","Green","Pink","Purple","Orange","Yellow"],ae=["Dog","Cat","Horse","Rabbit","Dolphin","Bear","Kangaroo","Lion","Tiger","Bird"],se=function(e){Object(v.a)(a,e);var t=Object(S.a)(a);function a(){var e;Object(f.a)(this,a);for(var s=arguments.length,i=new Array(s),n=0;n<s;n++)i[n]=arguments[n];return(e=t.call.apply(t,[this].concat(i))).state={age:"",color:"",animal:"",valid:!1,open:!1},e.componentDidUpdate=function(t,a){!1===a.valid&&""!==e.state.age&&""!==e.state.color&&""!==e.state.animal&&e.setState({valid:!0})},e.handleClickOpen=function(){e.setState({open:!0})},e.handleClose=function(){e.setState({open:!1})},e.handleAge=function(t){e.setState({age:t.target.value})},e.handleColor=function(t){e.setState({color:t.target.value})},e.handleAnimal=function(t){e.setState({animal:t.target.value})},e.handleSubmit=function(){if(e.state.valid){var t={age:e.state.age,color:e.state.color,animal:e.state.animal};O()({method:"post",url:"/server/user/".concat(e.props.userID,"/profile"),data:L.a.stringify(t),headers:{"content-type":"application/x-www-form-urlencoded;charset=utf-8"}}).then((function(t){(t.data.message="success")&&(e.props.setNewProfile(t.data.profileID,e.state.color,e.state.animal,e.state.age),e.props.history.push("/congrats"))}))}else e.handleClickOpen()},e}return Object(y.a)(a,[{key:"render",value:function(){var e=this;return Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)(g.a,{children:Object(s.jsx)("title",{children:"Storybook Academy | Create New Child Profile"})}),Object(s.jsxs)("div",{style:{margin:20,padding:10},children:[Object(s.jsx)(d.a,{className:"Storybook-Academy-header",children:"Welcome to Storybook Academy"}),Object(s.jsx)(d.a,{className:"greetings-header",children:"To begin, tell us about yourself."}),Object(s.jsx)("form",{children:Object(s.jsxs)(Z.a,{container:!0,style:{paddingTop:15},children:[Object(s.jsxs)(Z.a,{item:!0,xs:12,style:{paddingBottom:10},children:[Object(s.jsx)(d.a,{children:"How old are you?"}),ee.map((function(t){return Object(s.jsxs)(n.a.Fragment,{children:[Object(s.jsx)(X.a,{value:t,checked:e.state.age===t,color:"primary",onChange:e.handleAge}),t,Object(s.jsx)("br",{})]})}))]}),Object(s.jsxs)(Z.a,{item:!0,xs:12,style:{paddingBottom:10},children:[Object(s.jsx)(d.a,{children:"What is your favourite color?"}),te.map((function(t){return Object(s.jsxs)(n.a.Fragment,{children:[Object(s.jsx)(X.a,{value:t,checked:e.state.color===t,color:"primary",onChange:e.handleColor}),t,Object(s.jsx)("br",{})]})}))]}),Object(s.jsxs)(Z.a,{item:!0,xs:12,style:{paddingBottom:10},children:[Object(s.jsx)(d.a,{children:"What is your favourite animal?"}),ae.map((function(t){return Object(s.jsxs)(n.a.Fragment,{children:[Object(s.jsx)(X.a,{value:t,checked:e.state.animal===t,color:"primary",onChange:e.handleAnimal}),t,Object(s.jsx)("br",{})]})}))]})]})}),Object(s.jsx)("button",{onClick:this.handleSubmit,children:"Submit"}),Object(s.jsxs)(C.a,{open:this.state.open,onClose:this.handleClose,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(s.jsx)(w.a,{id:"alert-dialog-title",children:"Forget anything?"}),Object(s.jsx)(k.a,{children:Object(s.jsx)(N.a,{id:"alert-dialog-description",children:"Please Answer All The Questions!"})}),Object(s.jsx)(P.a,{children:Object(s.jsx)(I.a,{onClick:this.handleClose,color:"primary",autoFocus:!0,children:"Absolutely!"})})]})]})]})}}]),a}(i.Component),ie=Object(U.b)((function(e){return{userID:e.userInfo.userID}}),(function(e){return Object(M.a)({setNewProfile:q},e)}))(Object(o.g)(se)),ne=(a(163),a.p+"static/media/green_lion.39976864.jpg"),re=Object(U.b)((function(e){return{newProfile:e.userInfo.yourChildren[0]}}))((function(e){return Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)(g.a,{children:Object(s.jsx)("title",{children:"Storybook Academy | Congratulation"})}),Object(s.jsxs)("div",{className:"profile-done-block",children:[Object(s.jsx)(d.a,{className:"profile-congrat-header",children:"Congratulations,"}),Object(s.jsxs)(d.a,{className:"profile-congrat-text",children:[e.newProfile.color," ",e.newProfile.animal,"!"]}),Object(s.jsx)("img",{src:ne,alt:"icon",style:{width:300,height:300,padding:0,margin:0}}),Object(s.jsxs)(d.a,{className:"profile-greetings-text",children:["Your unique profile ID number is:",Object(s.jsx)(d.a,{style:{fontWeight:"bold",fontSize:25,color:e.newProfile.color},children:e.newProfile.id}),"PLEASE WRITE THIS DOWN"]}),Object(s.jsx)("div",{children:Object(s.jsx)(b.b,{to:"/",children:Object(s.jsx)("button",{id:"profile-congrat-enter-btn",children:"Enter Home"})})}),Object(s.jsx)("div",{children:Object(s.jsx)(b.b,{to:"/child-profile-form",children:Object(s.jsx)("button",{id:"profile-congrat-create-btn",children:"Create Another Child Profile"})})})]})]})})),ce=(a(164),function(e){Object(v.a)(a,e);var t=Object(S.a)(a);function a(){var e;Object(f.a)(this,a);for(var s=arguments.length,i=new Array(s),n=0;n<s;n++)i[n]=arguments[n];return(e=t.call.apply(t,[this].concat(i))).state={email:""},e.handleConfirm=function(){O()({method:"post",url:"/server/user/verify",data:L.a.stringify({email:e.state.email}),headers:{"content-type":"application/x-www-form-urlencoded;charset=utf-8"}}).then((function(t){console.log(t),200===t.status&&"success"===t.data.message&&(e.props.changeEmail(e.state.email),e.props.history.push("/signup"))}))},e}return Object(y.a)(a,[{key:"render",value:function(){var e=this;return Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)(g.a,{children:Object(s.jsx)("title",{children:"Storybook Academy | Email Confirmation"})}),Object(s.jsx)("section",{className:"email-confirm",children:Object(s.jsxs)("div",{className:"email-confirmContainer",style:{marginTop:"10%"},children:[Object(s.jsx)("h1",{children:"Sign Up"}),Object(s.jsx)("label",{children:"Enter your email address"}),Object(s.jsx)("input",{type:"text",required:!0,value:this.state.email,onChange:function(t){return e.setState({email:t.target.value})}}),Object(s.jsx)("div",{className:"btnContainer",children:Object(s.jsx)("button",{onClick:this.handleConfirm,children:"Register"})})]})})]})}}]),a}(i.Component)),oe=Object(U.b)((function(e){return{}}),(function(e){return Object(M.a)({changeEmail:R},e)}))(ce),le=(a(165),function(e){Object(v.a)(a,e);var t=Object(S.a)(a);function a(){var e;Object(f.a)(this,a);for(var s=arguments.length,i=new Array(s),n=0;n<s;n++)i[n]=arguments[n];return(e=t.call.apply(t,[this].concat(i))).state={email:"",password:"",otp:"",open:!1,next:!1,validStep1:!1,validStep2:!1},e.handleClickOpen=function(){e.setState({open:!0})},e.handleClose=function(){e.setState({open:!1})},e.componentDidUpdate=function(t,a){!a.validStep1&&e.validateEmail(e.state.email)&&e.setState({validStep1:!0}),a.validStep2||""===e.state.otp||""===e.state.password||e.setState({validStep2:!0})},e.handleSubmit=function(){e.state.validStep1?O()({method:"post",url:"/server/user/forgot",data:L.a.stringify({email:e.state.email}),headers:{"content-type":"application/x-www-form-urlencoded;charset=utf-8"}}).then((function(t){200===t.status&&"success"===t.data.message&&e.setState({next:!0})})):e.handleClickOpen()},e.handleReset=function(){e.state.validStep2?O()({method:"patch",url:"/server/user/reset",data:L.a.stringify({otp:e.state.otp,password:e.state.password}),headers:{"content-type":"application/x-www-form-urlencoded;charset=utf-8"}}).then((function(t){console.log(t),200===t.status&&"success"===t.data.message&&e.props.history.push("/login")})):e.handleClickOpen()},e.validateEmail=function(){return!!/^[a-zA-Z0-9]+@(?:[a-zA-Z0-9]+\.)+[A-Za-z]+$/.test(e.state.email)},e}return Object(y.a)(a,[{key:"render",value:function(){var e=this;return Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)(g.a,{children:Object(s.jsx)("title",{children:"Storybook Academy | Forgot Password"})}),this.state.next?Object(s.jsx)("section",{className:"forgotPassword",children:Object(s.jsxs)("div",{className:"forgotPasswordContainer",style:{marginTop:"10%"},children:[Object(s.jsx)("h1",{children:"Reset Password"}),Object(s.jsx)("label",{children:"Enter the 6-digit code we sent you via Email"}),Object(s.jsx)("input",{type:"text",autoFocus:!0,required:!0,value:this.state.otp,onChange:function(t){return e.setState({otp:t.target.value})}}),Object(s.jsx)("label",{children:"Password"}),Object(s.jsx)("input",{type:"password",required:!0,value:this.state.password,onChange:function(t){return e.setState({password:t.target.value})}}),Object(s.jsx)("div",{className:"btnContainer",children:Object(s.jsx)("button",{onClick:this.handleReset,children:"Reset"})})]})}):Object(s.jsx)("section",{className:"forgotPassword",children:Object(s.jsxs)("div",{className:"forgotPasswordContainer",style:{marginTop:"10%"},children:[Object(s.jsx)("h1",{children:"Reset Password"}),Object(s.jsx)("label",{children:"Enter your registered Email Address"}),Object(s.jsx)("input",{type:"text",autoFocus:!0,required:!0,value:this.state.email,onChange:function(t){return e.setState({email:t.target.value})}}),Object(s.jsx)("div",{className:"btnContainer",children:Object(s.jsx)("button",{onClick:this.handleSubmit,children:"Submit"})})]})}),Object(s.jsxs)(C.a,{open:this.state.open,onClose:this.handleClose,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(s.jsx)(w.a,{id:"alert-dialog-title",children:"Forget anything?"}),Object(s.jsx)(k.a,{children:Object(s.jsx)(N.a,{id:"alert-dialog-description",children:"Please fill in all the required fields."})}),Object(s.jsx)(P.a,{children:Object(s.jsx)(I.a,{onClick:this.handleClose,color:"primary",autoFocus:!0,children:"Absolutely!"})})]})]})}}]),a}(i.Component));a(166);class de extends i.Component{constructor(...e){super(...e),this.state={userID:this.props.cookies.get("userID")||"",validSession:!0},this.getProfiles=()=>{O.a.get(`/server/user/${this.state.userID}/profiles`).then((e=>{"success"===e.data.message&&this.props.setProfiles(e.data.profiles)}))},this.handleLogout=()=>{O.a.get("/server/user/logout",{withCredentials:!0}).then((e=>{"success"===e.data.message&&(this.props.logout(),this.props.cookies.remove("userID"),this.props.cookies.remove("profileID"),this.props.cookies.set("connect.sid","",{path:"/",maxAge:0}),this.props.cookies.remove("connect.sid"),this.props.history.push("/login"))}))},this.handleChooseProfile=e=>{this.props.setCurrentProfile(e),this.props.cookies.set("profileID",e,{path:"/",maxAge:86400})},this.componentDidMount=()=>{this.authenticate(),this.getProfiles(),setInterval((()=>this.authenticate()),6e5)},this.authenticate=async()=>{"success"!==(await O.a.post("/server/user/authenticate",{},{withCredentials:!0})).data.message&&this.props.history.push("/login")}}render(){return Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)(g.a,{children:Object(s.jsx)("title",{children:"Storybook Academy | Profile"})}),Object(s.jsxs)("div",{className:"profile-home-block",children:[Object(s.jsx)(d.a,{className:"profile-home-header",children:"Please select who is reading today"}),Object(s.jsx)("hr",{style:{width:"66%",margin:"auto",padding:30}}),this.props.childrenProfile.map(((e,t)=>Object(s.jsx)("div",{id:t,style:{border:"1px solid grey",borderRadius:20,width:500,margin:"auto",marginBottom:40},children:Object(s.jsxs)(b.b,{to:"/meetings",onClick:()=>this.handleChooseProfile(e._id),children:[Object(s.jsxs)(d.a,{className:"profile-home-id-text",style:{fontWeight:"bold",fontSize:25,color:e.color,marginTop:20},children:["ID: ",e._id]}),Object(s.jsx)("img",{src:`data:image/jpeg;base64,${e.icon}`,alt:"icon",style:{width:300,height:300,padding:0,margin:0},onClick:()=>this.props.setCurrentProfile(e)})]})}))),Object(s.jsx)("div",{children:Object(s.jsx)(b.b,{to:"/child-profile-form",children:Object(s.jsx)("button",{id:"profile-home-create-btn",children:"Create Another Child Profile"})})}),Object(s.jsx)("div",{children:Object(s.jsx)("button",{id:"profile-home-logout-btn",onClick:this.handleLogout,children:"Log out"})})]})]})}}var he=Object(U.b)((e=>({childrenProfile:e.userInfo.yourChildren,userID:e.userInfo.userID})),(e=>Object(M.a)({setProfiles:z,setCurrentProfile:W,logout:F},e)))(Object(G.a)(de)),je=a(248),ue=a(249),pe=a(250),be=a(251),ge=(a(167),a.p+"static/media/children.4545a2d3.jpg");function me(e){const{handleOpen:t,open:a,story:i,handleChooseStory:n}=e;return Object(s.jsxs)(C.a,{open:a,onClose:()=>t(!1),maxWidth:"lg",children:[Object(s.jsx)(w.a,{children:Object(s.jsx)(d.a,{variant:"h3",children:i.title})}),Object(s.jsxs)(k.a,{children:[Object(s.jsxs)(d.a,{style:{fontSize:25},children:["Author: ",i.author]}),Object(s.jsxs)(d.a,{style:{fontSize:25},children:["Pages: ",i.pages]}),Object(s.jsx)("img",{src:ge,alt:"thumbnail",style:{width:200,height:200,margin:20}}),Object(s.jsx)("div",{style:{fontSize:20,marginTop:15},children:i.description})]}),Object(s.jsxs)(P.a,{children:[Object(s.jsx)(I.a,{variant:"primary",onClick:()=>t(!1),children:"Back"}),Object(s.jsx)(I.a,{variant:"primary",onClick:()=>n(i.title),children:"Read"})]})]})}class Oe extends i.Component{constructor(...e){super(...e),this.state={titles:[],open:!1,chosenStory:{title:"",description:"",author:"",ages:[""]}},this.getTitles=()=>{O.a.get("/server/library/titles").then((e=>{"success"===e.data.message&&this.setState({titles:e.data.stories})}))},this.componentDidMount=()=>{this.getTitles()},this.handleChooseStory=e=>{this.props.setActiveStory(e),this.props.cookies.set("activeStory",e,{path:"/",maxAge:86400}),this.props.toggleLeft("read-story")},this.handleOpen=e=>{this.setState({open:e})},this.handlePreview=e=>{this.setState({open:!0,chosenStory:e})}}render(){return Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)(d.a,{className:"library-page-header",variant:"h2",children:"Library"}),Object(s.jsx)("div",{className:"library-page-block",children:Object(s.jsx)(je.a,{sx:{width:"100%",maxWidth:360,bgcolor:"background.paper"},children:this.state.titles.map(((e,t)=>Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)(ue.a,{alignItems:"flex-start",onClick:()=>{this.handlePreview(e)},style:{cursor:"pointer"},className:"lib-story",children:Object(s.jsx)(pe.a,{primary:`Title: ${e.title}`,secondary:Object(s.jsxs)(n.a.Fragment,{children:[Object(s.jsxs)(d.a,{component:"span",variant:"body1",color:"text.primary",style:{fontStyle:"italic",marginBottom:10},children:["Author: ",e.author]}),Object(s.jsxs)(d.a,{variant:"body1",children:["Pages: ",e.pages]}),Object(s.jsxs)(d.a,{variant:"body1",children:["Ages: ",e.ages[0]," and ",e.ages[1]]})]})})}),Object(s.jsx)(be.a,{variant:"inset",component:"li"})]})))})}),Object(s.jsx)(me,{handleOpen:this.handleOpen,open:this.state.open,story:this.state.chosenStory,handleChooseStory:this.handleChooseStory})]})}}var xe=Object(U.b)((e=>({})),(e=>Object(M.a)({setActiveStory:B},e)))(Object(G.a)(Oe)),fe=(a(168),a(252));const ye=e=>{const[t,a]=Object(i.useState)([]),n=Object(U.d)((e=>e.userInfo.userID)),[r]=Object(fe.a)(),c=Object(U.c)();return Object(i.useEffect)((()=>{!async function(){const e=""!==n?n:r.userID,t=await O.a.get(`/server/user/${e}/students`);"success"===t.data.message&&a(t.data.students)}()}),[]),Object(s.jsx)("div",{className:"friendslist-innerdiv",children:t.map(((t,a)=>Object(s.jsxs)("div",{className:"friend-line",onClick:()=>{},children:[t.email+"\n("+t._id+")",Object(s.jsx)("span",{children:Object(s.jsx)(I.a,{onClick:()=>{c({type:"SETFRIENDEMAIL",payload:{email:t.email}}),e.toggleRight("calling")},children:"Call"})})]},a)))})},ve=()=>{const[e,t]=Object(i.useState)(""),a=Object(i.useRef)(null),n=Object(U.d)((e=>e.userInfo.userID));Object(i.useEffect)((()=>{a.current.focus()}));const r=a=>{a.preventDefault(),O()({method:"post",url:"/server/user/send",data:{email:e,username:n}}),t("")};return Object(s.jsx)("form",{onSubmit:r,className:"addfriend-form",children:Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)("input",{placeholder:"Add a new friend",value:e,onChange:e=>{t(e.target.value)},name:"text",className:"addfriend-input",ref:a}),Object(s.jsx)(I.a,{onClick:r,className:"addfriend-button",children:"Add Friend"})]})})};var Se=function(e){return Object(s.jsxs)("div",{className:"friendslist-outerdiv",children:[Object(s.jsx)("h1",{style:{fontSize:60},children:"Friends List"}),Object(s.jsx)(ve,{}),Object(s.jsx)(ye,{toggleRight:e.toggleRight})]})},Ce=a(66),we=a(254),ke=a(118),Ne=a.n(ke),Pe=a(117),Ie=a.n(Pe),Ae=a(116),Ee=a.n(Ae),Le=(a(199),a(115)),De=a.n(Le);Ce.c.GlobalWorkerOptions.workerSrc=`//cdnjs.cloudflare.com/ajax/libs/pdf.js/${Ce.c.version}/pdf.worker.js`;class Te extends i.Component{constructor(...e){super(...e),this.state={numPages:null,pageNumber:1,prevAvailable:!1,nextAvailable:!1,tempPageNo:1,file:null,isLoading:!0},this.onDocumentLoadSuccess=({numPages:e})=>{e>1?this.setState({numPages:e,nextAvailable:!0}):this.setState({numPages:e})},this.goToPrevPage=()=>{this.state.pageNumber-1===1?this.setState((e=>({pageNumber:e.pageNumber-1,prevAvailable:!1,nextAvailable:!0}))):this.setState((e=>({pageNumber:e.pageNumber-1,nextAvailable:!0})))},this.goToNextPage=()=>{this.state.pageNumber+1===this.state.numPages?this.setState((e=>({pageNumber:e.pageNumber+1,nextAvailable:!1,prevAvailable:!0}))):this.setState((e=>({pageNumber:e.pageNumber+1,prevAvailable:!0})))},this.goToPage=()=>{this.state.tempPageNo>0&&this.state.tempPageNo<=this.state.numPages?this.setState({pageNumber:this.state.tempPageNo}):console.log("Invalid")},this.handleChange=e=>{if(""!==e.target.value){let t=e.target.value;isNaN(t)||(t=parseInt(t),this.setState({tempPageNo:t}))}},this.componentDidUpdate=(e,t)=>{if(t.pageNumber!==this.state.pageNumber){var a=!1,s=!1;this.state.pageNumber>1&&this.state.pageNumber<this.state.numPages?(a=!0,s=!0):this.state.pageNumber<=1?s=!0:this.state.pageNumber>=this.state.numPages&&(a=!0),this.setState({prevAvailable:a,nextAvailable:s})}}}componentDidMount(){O()({method:"GET",url:"/server/library/story",params:{title:this.props.title},responseType:"blob"}).then((e=>{const t=new Blob([e.data],{type:"application/pdf"});this.setState({file:t,isLoading:!1})}))}render(){const{pageNumber:e,numPages:t}=this.state;return this.state.isLoading?Object(s.jsxs)("div",{className:"pdf-display-loading",children:[Object(s.jsx)("h1",{children:"Loading story"}),Object(s.jsx)(De.a,{size:100})]}):Object(s.jsxs)("div",{className:"pdf-display-container",children:[Object(s.jsx)("div",{children:Object(s.jsxs)(I.a,{variant:"outlined",color:"secondary",onClick:this.props.backToLibrary,style:{width:210,margin:25},children:[Object(s.jsx)(Ee.a,{style:{marginRight:10}}),"Back to Library"]})}),Object(s.jsx)("h3",{children:this.props.title}),Object(s.jsx)(Ce.a,{file:this.state.file,onLoadSuccess:this.onDocumentLoadSuccess,children:Object(s.jsx)(Ce.b,{pageNumber:e})}),Object(s.jsxs)("p",{className:"page-info",children:["Page ",e," of ",t]}),Object(s.jsxs)("div",{children:[Object(s.jsx)(we.a,{id:"standard-basic",label:"Jump To",placeholder:"Ex: 1",onChange:e=>this.handleChange(e),style:{maxWidth:80,maxHeight:30}}),Object(s.jsx)("span",{children:Object(s.jsx)(I.a,{onClick:this.goToPage,style:{maxWidth:40,marginTop:10},children:"Go!"})}),Object(s.jsxs)("span",{className:"prev-next-block",children:[this.state.prevAvailable?Object(s.jsxs)(I.a,{variant:"outlined",color:"primary",onClick:this.goToPrevPage,style:{maxWidth:175,marginLeft:"5%"},children:[Object(s.jsx)(Ie.a,{}),"Previous Page"]}):Object(s.jsx)(s.Fragment,{}),this.state.nextAvailable?Object(s.jsxs)(I.a,{variant:"outlined",color:"primary",disabled:!this.state.nextAvailable,onClick:this.goToNextPage,style:{maxWidth:175,marginLeft:"5%"},children:["Next Page",Object(s.jsx)(Ne.a,{})]}):Object(s.jsx)(s.Fragment,{})]})]})]})}}var Fe=Te;var Re=()=>{const[e]=Object(fe.a)(),t=e.activeStory||"";return Object(s.jsx)(s.Fragment,{children:Object(s.jsx)(Fe,{title:t,backToLibrary:()=>{(void 0).props.toggleLeft("library")}})})};a(106);var qe=e=>{const[t,a]=Object(i.useState)(""),n=Object(U.d)((e=>e.userInfo.userID)),r=Object(U.d)((e=>e.userInfo.friendEmail)),[c]=Object(fe.a)();return Object(i.useEffect)((()=>{!async function(){const e=await O()({method:"post",url:"/server/user/send",data:L.a.stringify({username:""===n?c.userID:n,email:r}),headers:{"content-type":"application/x-www-form-urlencoded;charset=utf-8"}});"success"===e.data.message&&a(e.data.hostRoomUrl)}()}),[n,r]),Object(s.jsxs)("div",{className:"videocall-iframe-div",children:[Object(s.jsx)("iframe",{title:"videocall-iframe",className:"videocall-iframe-element",src:t,allow:"camera; microphone; fullscreen; speaker; display-capture"}),Object(s.jsx)("button",{style:{width:75,margin:5},onClick:()=>e.toggleRight("friends-list"),children:"Back"})]})};class ze extends i.Component{constructor(...e){super(...e),this.state={toggleLeft:"library",toggleRight:"friends-list"},this.setLeft=e=>{this.setState({toggleLeft:e})},this.setRight=e=>{this.setState({toggleRight:e})},this.componentDidMount=()=>{this.authenticate(),setInterval((()=>this.authenticate()),6e5)},this.authenticate=async()=>{"success"!==(await O.a.post("/server/user/authenticate",{},{withCredentials:!0})).data.message&&this.props.history.push("/login")}}render(){return Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)(g.a,{children:Object(s.jsx)("title",{children:"Storybook Academy | Meeting"})}),Object(s.jsxs)("div",{className:"videocall-page-outerdiv",children:[Object(s.jsx)("div",{className:"videocall-page-leftdiv",children:"library"===this.state.toggleLeft?Object(s.jsx)(xe,{toggleLeft:e=>this.setLeft(e)}):Object(s.jsx)(Re,{toggleLeft:e=>this.setLeft(e)})}),Object(s.jsx)("div",{className:"videocall-page-rightdiv",children:"friends-list"===this.state.toggleRight?Object(s.jsx)(Se,{toggleRight:e=>this.setRight(e)}):Object(s.jsx)(qe,{toggleRight:e=>this.setRight(e)})})]})]})}}var We=ze;var Be=()=>Object(s.jsxs)(o.c,{children:[Object(s.jsx)(o.a,{path:"/login",exact:!0,component:Q}),Object(s.jsx)(o.a,{path:"/signup",exact:!0,component:K}),Object(s.jsx)(o.a,{path:"/child-profile-form",exact:!0,component:ie}),Object(s.jsx)(o.a,{path:"/congrats",exact:!0,component:re}),Object(s.jsx)(o.a,{path:"/email-confirmation",exact:!0,component:oe}),Object(s.jsx)(o.a,{path:"/forgot-password",exact:!0,component:le}),Object(s.jsx)(o.a,{path:"/profile",exact:!0,component:he}),Object(s.jsx)(o.a,{path:"/meetings",exact:!0,component:We}),Object(s.jsx)(o.a,{path:"/",exact:!0,component:x})]});a(205);var Ue=function(){return Object(s.jsx)("div",{className:"App",children:Object(s.jsx)(Be,{})})},Me=(a(206),a(119)),Ge=a(27),$e={userID:"",email:"",currentProfile:{},yourChildren:[],friends:[],activeStory:{},friendEmail:""},Qe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$e,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN":case"SIGNUP":return Object(Ge.a)(Object(Ge.a)({},e),{},{userID:t.payload.userID,email:t.payload.email});case"SETEMAIL":return Object(Ge.a)(Object(Ge.a)({},e),{},{email:t.payload});case"SETNEWPROFILE":return Object(Ge.a)(Object(Ge.a)({},e),{},{yourChildren:[].concat(Object(Me.a)(e.yourChildren),[t.payload])});case"SETPROFILES":return Object(Ge.a)(Object(Ge.a)({},e),{},{yourChildren:t.payload});case"SETCURRENTPROFILE":return Object(Ge.a)(Object(Ge.a)({},e),{},{currentProfile:t.payload});case"SETACTIVESTORY":return Object(Ge.a)(Object(Ge.a)({},e),{},{activeStory:t.payload});case"SETFRIENDEMAIL":return Object(Ge.a)(Object(Ge.a)({},e),{},{friendEmail:t.payload.email});case"LOGOUT":return $e;default:return e}},Ze=Object(M.b)({userInfo:Qe}),He=a(253),Ve=Object(M.c)(Ze);c.a.render(Object(s.jsx)(n.a.StrictMode,{children:Object(s.jsx)(He.a,{children:Object(s.jsx)(U.a,{store:Ve,children:Object(s.jsx)(b.a,{children:Object(s.jsx)(Ue,{})})})})}),document.getElementById("root"))},90:function(e,t,a){}},[[207,1,2]]]);
//# sourceMappingURL=main.24508630.chunk.js.map